# 변경 기록 (Changelog)

모든 주요 변경 사항은 이 파일에 문서화됩니다.

---

## [1.2.2] - 2025-01-13

### 🐛 버그 수정 (Critical - FINAL)

#### 사이트 멈춤 현상 최종 해결
DOM 요소 교체 기법으로 이벤트 리스너 문제 근본 해결

**최종 해결 방법**:
- ✅ **DOM 요소 완전 교체**
  - `cloneNode()` + `replaceChild()`로 요소 교체
  - 모든 이벤트 리스너 완전 제거
  - 클로저 누적 문제 해결
  
- ✅ **HTML 인라인 이벤트**
  - JavaScript 이벤트 리스너 대신 HTML onkeydown 속성 사용
  - 중복 등록 원천 차단
  
- ✅ **타임아웃 관리**
  - 모든 setTimeout ID 추적
  - 새 답안 제출 시 이전 타임아웃 취소
  
- ✅ **상세한 로그**
  - Console에서 실시간 디버깅 가능
  - 문제 발생 시 즉시 원인 파악

**영향 범위**: `js/game.js`, `index.html`

**핵심 기술**: DOM 요소 교체 패턴 (React, Vue 등에서 사용하는 방법)

상세 내용: `BUGFIX-2025-01-13-FINAL.md` 참조

---

## [1.2.1] - 2025-01-13

### 🐛 버그 수정 (Critical - Part 2)

#### 사이트 멈춤 현상 추가 수정
첫 번째 수정 후에도 여전히 발생하던 멈춤 현상 완전 해결

**추가 수정 내용**:
- ✅ 이벤트 리스너 완전한 제거/등록
  - `removeEventListener` 먼저 호출 후 `addEventListener`
  - 중복 등록 완전 차단
  
- ✅ 전역 제출 플래그 추가
  - `gameState.isSubmitting` 플래그로 상태 추적
  - 답안 제출 중 모든 새 요청 차단
  
- ✅ 플래그 관리 강화
  - 정답 처리 후 플래그 해제 추가
  - 오답 처리 후 플래그 해제 확인
  - 모든 경로에서 플래그 정상 관리

- ✅ 디버깅 지원
  - 콘솔 로그 추가로 상태 추적 가능
  - 문제 발생 시 즉시 원인 파악

**영향 범위**: `js/game.js`

**3중 방어 시스템**:
1. 이벤트 리스너 레벨 - removeEventListener로 중복 방지
2. 전역 플래그 레벨 - isSubmitting으로 상태 관리
3. UI 레벨 - disabled 속성으로 입력 차단

상세 내용: `BUGFIX-2025-01-13-PART2.md` 참조

---

## [1.2.0] - 2025-01-13

### ✨ 기능 변경

#### 플레이어 선택 옵션 변경
2-4명 선택에서 1명(혼자) 또는 2명으로 변경

**변경 내용**:
- ✅ 혼자 플레이 모드 추가
  - 순서 결정 화면 건너뛰기
  - 플레이어 이름 "나"로 표시
  - 도착 지점까지 학습 진행
  
- ✅ 2명 플레이 유지
  - 가위바위보로 순서 결정
  - 먼저 도착한 사람이 승리

**영향 범위**: `index.html`, `js/game.js`, `README.md`

**사용자 요청**: 혼자 또는 둘이서 플레이할 수 있도록 단순화

---

## [1.1.0] - 2025-01-13

### 🐛 버그 수정 (Critical)

#### 사이트 멈춤 현상 해결
게임 플레이 중 웹사이트가 응답하지 않고 멈추는 치명적 버그 수정

**수정 내용**:
- ✅ 이벤트 리스너 중복 등록 방지
  - `handleAnswerKeyPress()` 함수 분리
  - `addEventListener` + `removeEventListener` 사용
  - Enter 키 이벤트 핸들러 정확한 등록/제거
  
- ✅ Web Audio API 메모리 누수 해결
  - 모든 oscillator에 `onended` 핸들러 추가
  - 재생 완료 후 자동으로 `disconnect()` 호출
  - 장시간 플레이 시 메모리 사용량 안정화
  
- ✅ 중복 제출 방지
  - `submitAnswer()` 함수에 상태 확인 로직 추가
  - `disabled` 상태 검사로 동시 실행 차단
  - 버튼과 입력창 상태 동기화

**영향 범위**: `js/game.js`

**테스트 완료**:
- ✅ 20턴 이상 연속 진행
- ✅ Enter 키 반복 사용
- ✅ 오답 후 재시도 무한 반복
- ✅ 30분 이상 장시간 플레이

상세 내용: `BUGFIX-2025-01-13.md` 참조

---

## [1.0.1] - 2025-01-12

### ✨ 기능 개선

#### 직접 입력 방식으로 전환
선택지 버튼 방식에서 숫자 직접 입력 방식으로 변경

**추가 기능**:
- 큰 입력창 (80px 높이, 3em 폰트)
- Enter 키 지원으로 빠른 답변 가능
- 시각적 피드백 강화 (녹색/빨강 색상, shake 애니메이션)
- 선택적 보기 버튼 (💡 힌트)
- 보기 클릭 시 입력창에 자동 채우기

#### 단계별 과정 시각화
학습 효과 향상을 위한 과정 표시

**표시 항목**:
1. 주사위 결과
2. 빈칸에 써넣기
3. 나눗셈 계산
4. 나머지 입력

**영향 범위**: `index.html`, `css/style.css`, `js/game.js`

---

## [1.0.0] - 2025-01-11

### 🎉 최초 릴리즈

#### 핵심 기능
- ✅ 2-4명 플레이어 선택
- ✅ 자동 가위바위보 순서 결정
- ✅ 27칸 구불구불한 보드판
- ✅ 주사위 시스템
- ✅ 나눗셈 문제 풀이
- ✅ 6개 보기 중 정답 선택
- ✅ 특수 칸 (뒤로 2칸 이동)
- ✅ 턴제 시스템
- ✅ 승리 판정

#### 사운드 효과
- Web Audio API 기반 브라우저 네이티브 사운드
- 주사위, 정답, 오답, 이동, 승리, 클릭 소리
- 소리 ON/OFF 토글

#### 시각적 효과
- 플레이어별 색상 구분
- 현재 턴 강조
- 경로 화살표
- 애니메이션 효과

#### 최적화 버전
- `game-optimized.js`: 17% 코드 감소
- `style-optimized.css`: CSS 변수 사용
- 모듈화 구조: CONSTANTS, Sound, UI, Division

**영향 범위**: 전체 프로젝트

---

## 버전 규칙

- **Major (X.0.0)**: 큰 기능 추가, 호환성 깨지는 변경
- **Minor (1.X.0)**: 새 기능 추가, 하위 호환성 유지
- **Patch (1.0.X)**: 버그 수정, 작은 개선

---

## 참고

- 상세 버그 수정: `BUGFIX-YYYY-MM-DD.md` 파일 참조
- 최적화 정보: `OPTIMIZATION.md` 참조
- 프로젝트 문서: `README.md` 참조
