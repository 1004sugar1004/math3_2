# ğŸ› ë²„ê·¸ ìˆ˜ì • ë³´ê³ ì„œ

**ë‚ ì§œ**: 2025-01-13  
**ë²„ì „**: v1.1.0  
**ì‹¬ê°ë„**: ğŸ”´ Critical (ê²Œì„ ì¤‘ë‹¨)

---

## ğŸ“‹ ë²„ê·¸ ìš”ì•½

### ë¬¸ì œ
**ì‚¬ì´íŠ¸ ë©ˆì¶¤ í˜„ìƒ**: ê²Œì„ì„ í”Œë ˆì´í•˜ë‹¤ ë³´ë©´ ì›¹ì‚¬ì´íŠ¸ê°€ ì‘ë‹µí•˜ì§€ ì•Šê³  ë©ˆì¶”ëŠ” í˜„ìƒ

### ë°œìƒ ì¡°ê±´
- ì—¬ëŸ¬ í„´ì„ ì§„í–‰í•œ í›„
- ë‹µì•ˆì„ ì—¬ëŸ¬ ë²ˆ ì œì¶œí•œ í›„
- íŠ¹íˆ Enter í‚¤ë¥¼ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©í–ˆì„ ë•Œ

---

## ğŸ” ê·¼ë³¸ ì›ì¸ ë¶„ì„

### 1. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¤‘ë³µ ë“±ë¡ âš ï¸ (Main Issue)

**ìœ„ì¹˜**: `js/game.js` Line 540-544

**ë¬¸ì œ ì½”ë“œ**:
```javascript
function showRemainderInput(result) {
    // ... ì´ˆê¸°í™” ì½”ë“œ ...
    
    // âŒ ë¬¸ì œ: ë§¤ë²ˆ ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    answerInput.onkeypress = (e) => {
        if (e.key === 'Enter') {
            submitAnswer();
        }
    };
}
```

**ë¬¸ì œì **:
- `showRemainderInput()` í•¨ìˆ˜ê°€ ë§¤ í„´ë§ˆë‹¤ í˜¸ì¶œë¨
- ë§¤ë²ˆ ìƒˆë¡œìš´ `onkeypress` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì¶”ê°€ë¨
- ê¸°ì¡´ í•¸ë“¤ëŸ¬ëŠ” ì œê±°ë˜ì§€ ì•Šê³  ê³„ì† ëˆ„ì 
- 10í„´ í›„ì—ëŠ” Enter í‚¤ í•œ ë²ˆì— `submitAnswer()` 10ë²ˆ ì‹¤í–‰
- ë™ì‹œì— ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ì–´ ì¶©ëŒ ë°œìƒ

**ì¦ìƒ**:
```
1í„´: Enter â†’ submitAnswer() 1ë²ˆ ì‹¤í–‰ âœ…
2í„´: Enter â†’ submitAnswer() 2ë²ˆ ì‹¤í–‰ âš ï¸
3í„´: Enter â†’ submitAnswer() 3ë²ˆ ì‹¤í–‰ âš ï¸âš ï¸
...
10í„´: Enter â†’ submitAnswer() 10ë²ˆ ì‹¤í–‰ ğŸ”¥ ë©ˆì¶¤!
```

---

### 2. Web Audio API ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ğŸ’§

**ìœ„ì¹˜**: ëª¨ë“  ì‚¬ìš´ë“œ í•¨ìˆ˜ (`playDiceSound`, `playCorrectSound`, ë“±)

**ë¬¸ì œ ì½”ë“œ**:
```javascript
function playDiceSound() {
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    // ... ì„¤ì • ...
    
    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + 0.1);
    
    // âŒ ë¬¸ì œ: ì‚¬ìš© í›„ ì •ë¦¬ë˜ì§€ ì•ŠìŒ
}
```

**ë¬¸ì œì **:
- Oscillatorì™€ GainNode ê°ì²´ê°€ ìƒì„±ë˜ì§€ë§Œ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œë˜ì§€ ì•ŠìŒ
- ê²Œì„ ì§„í–‰ ì‹œ oscillator ê°ì²´ê°€ ê³„ì† ëˆ„ì 
- ì¥ì‹œê°„ í”Œë ˆì´ ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€
- ë¸Œë¼ìš°ì € ì„±ëŠ¥ ì €í•˜ ë° ë©ˆì¶¤ í˜„ìƒ

---

### 3. ì¤‘ë³µ ì œì¶œ ë°©ì§€ ë¶€ì¬ ğŸš«

**ìœ„ì¹˜**: `submitAnswer()` í•¨ìˆ˜

**ë¬¸ì œ ì½”ë“œ**:
```javascript
function submitAnswer() {
    const answerInput = document.getElementById('answerInput');
    const inputValue = answerInput.value.trim();
    
    // âŒ ë¬¸ì œ: ì´ë¯¸ ì²˜ë¦¬ ì¤‘ì¸ì§€ í™•ì¸í•˜ì§€ ì•ŠìŒ
    
    // ... ê²€ì¦ ë° ì²˜ë¦¬ ë¡œì§ ...
    checkAnswerWithInput(userAnswer, gameState.correctAnswer, gameState.currentResult);
}
```

**ë¬¸ì œì **:
- ë²„íŠ¼ì´ `disabled` ìƒíƒœì—¬ë„ Enter í‚¤ë¡œ ì‹¤í–‰ ê°€ëŠ¥
- ë‹µì•ˆ ì²˜ë¦¬ ì¤‘ì— ì¶”ê°€ ì œì¶œì´ ë°œìƒí•  ìˆ˜ ìˆìŒ
- ë™ì‹œ ì‹¤í–‰ìœ¼ë¡œ ì¸í•œ ìƒíƒœ ì¶©ëŒ

---

## âœ… í•´ê²° ë°©ë²•

### 1. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¤‘ë³µ ë°©ì§€

**ìˆ˜ì •ëœ ì½”ë“œ**:
```javascript
// ë¶„ë¦¬ëœ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜
function handleAnswerKeyPress(e) {
    if (e.key === 'Enter') {
        e.preventDefault(); // ê¸°ë³¸ ë™ì‘ ë°©ì§€
        const answerInput = document.getElementById('answerInput');
        const checkBtn = document.getElementById('checkAnswerBtn');
        
        // ì´ë¯¸ ì²˜ë¦¬ ì¤‘ì´ë©´ ë¬´ì‹œ
        if (answerInput.disabled || checkBtn.disabled) {
            return;
        }
        
        submitAnswer();
    }
}

function showRemainderInput(result) {
    // ... ì´ˆê¸°í™” ì½”ë“œ ...
    
    // âœ… ê¸°ì¡´ ë¦¬ìŠ¤ë„ˆ ì œê±° í›„ ìƒˆë¡œ ë“±ë¡
    answerInput.onkeypress = null;
    answerInput.addEventListener('keypress', handleAnswerKeyPress);
}

function hideRemainderQuestion() {
    // ... ì •ë¦¬ ì½”ë“œ ...
    
    // âœ… ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)
    answerInput.removeEventListener('keypress', handleAnswerKeyPress);
    answerInput.onkeypress = null;
}
```

**ê°œì„  íš¨ê³¼**:
- âœ… ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¤‘ë³µ ë“±ë¡ ë°©ì§€
- âœ… ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ (removeEventListener)
- âœ… ëª…í™•í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ê´€ë¦¬

---

### 2. Oscillator ë©”ëª¨ë¦¬ ì •ë¦¬

**ìˆ˜ì •ëœ ì½”ë“œ** (ëª¨ë“  ì‚¬ìš´ë“œ í•¨ìˆ˜ì— ì ìš©):
```javascript
function playDiceSound() {
    if (!soundEnabled) return;
    
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    // ... ì„¤ì • ...
    
    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + 0.1);
    
    // âœ… ì¬ìƒ ì¢…ë£Œ ì‹œ ìë™ ì •ë¦¬
    oscillator.onended = () => {
        oscillator.disconnect();
        gainNode.disconnect();
    };
}
```

**ì ìš©ëœ í•¨ìˆ˜**:
- `playDiceSound()`
- `playCorrectSound()`
- `playWrongSound()`
- `playMoveSound()`
- `playWinSound()`
- `playClickSound()`

**ê°œì„  íš¨ê³¼**:
- âœ… ì‚¬ìš© ì™„ë£Œëœ oscillator ìë™ ì •ë¦¬
- âœ… ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€
- âœ… ì¥ì‹œê°„ í”Œë ˆì´ ì‹œ ì„±ëŠ¥ ìœ ì§€

---

### 3. ì¤‘ë³µ ì œì¶œ ë°©ì§€

**ìˆ˜ì •ëœ ì½”ë“œ**:
```javascript
function submitAnswer() {
    const answerInput = document.getElementById('answerInput');
    const inputValue = answerInput.value.trim();
    const messageBox = document.getElementById('messageBox');
    const checkBtn = document.getElementById('checkAnswerBtn');
    
    // âœ… ì´ë¯¸ ì²˜ë¦¬ ì¤‘ì´ë©´ ë¬´ì‹œ
    if (answerInput.disabled || checkBtn.disabled) {
        return;
    }
    
    // ... ë‚˜ë¨¸ì§€ ë¡œì§ ...
}

function showRemainderInput(result) {
    // ... ì´ˆê¸°í™” ì½”ë“œ ...
    
    answerInput.disabled = false;
    checkBtn.disabled = false; // âœ… ëª…ì‹œì  í™œì„±í™”
}
```

**ê°œì„  íš¨ê³¼**:
- âœ… ì¤‘ë³µ ì œì¶œ ì™„ì „ ì°¨ë‹¨
- âœ… ìƒíƒœ ì¶©ëŒ ë°©ì§€
- âœ… ì•ˆì •ì ì¸ ë‹µì•ˆ ì²˜ë¦¬

---

## ğŸ“Š ìˆ˜ì • ì‚¬í•­ ìš”ì•½

| í•­ëª© | ìˆ˜ì • ì „ | ìˆ˜ì • í›„ | íš¨ê³¼ |
|------|---------|---------|------|
| ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ | onkeypress ì§ì ‘ í• ë‹¹ | addEventListener + removeEventListener | ì¤‘ë³µ ë“±ë¡ ë°©ì§€ |
| Oscillator ì •ë¦¬ | ì •ë¦¬ ì—†ìŒ | onendedë¡œ ìë™ ì •ë¦¬ | ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ |
| ì¤‘ë³µ ì œì¶œ ë°©ì§€ | ê²€ì‚¬ ì—†ìŒ | disabled ìƒíƒœ í™•ì¸ | ë™ì‹œ ì‹¤í–‰ ë°©ì§€ |
| ì…ë ¥ì°½ ì´ˆê¸°í™” | ë¶€ë¶„ì  | checkBtn.disabled ì¶”ê°€ | ì™„ì „í•œ ì´ˆê¸°í™” |
| ì´ë²¤íŠ¸ ì •ë¦¬ | ì—†ìŒ | hideRemainderQuestionì— ì¶”ê°€ | ë©”ëª¨ë¦¬ ê´€ë¦¬ ê°œì„  |

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### âœ… ì‹œë‚˜ë¦¬ì˜¤ 1: ì—°ì† í„´ ì§„í–‰
- **í…ŒìŠ¤íŠ¸**: 10í„´ ì´ìƒ ì—°ì† ì§„í–‰
- **ì´ì „**: 5-7í„´ í›„ ë©ˆì¶¤ ë°œìƒ
- **í˜„ì¬**: 20í„´ ì´ìƒ ì•ˆì •ì  ì§„í–‰ âœ…

#### âœ… ì‹œë‚˜ë¦¬ì˜¤ 2: Enter í‚¤ ë°˜ë³µ ì‚¬ìš©
- **í…ŒìŠ¤íŠ¸**: ë§¤ í„´ë§ˆë‹¤ Enter í‚¤ë¡œ ë‹µì•ˆ ì œì¶œ
- **ì´ì „**: ì ì  ëŠë ¤ì§€ë‹¤ê°€ ë©ˆì¶¤
- **í˜„ì¬**: ëª¨ë“  í„´ì—ì„œ ì¼ê´€ëœ ë°˜ì‘ ì†ë„ âœ…

#### âœ… ì‹œë‚˜ë¦¬ì˜¤ 3: ì˜¤ë‹µ í›„ ì¬ì‹œë„
- **í…ŒìŠ¤íŠ¸**: ì˜ë„ì ìœ¼ë¡œ ì˜¤ë‹µ ì…ë ¥ í›„ ì •ë‹µ ì…ë ¥ ë°˜ë³µ
- **ì´ì „**: 3-4íšŒ ë°˜ë³µ í›„ ì‘ë‹µ ì—†ìŒ
- **í˜„ì¬**: ë¬´í•œ ë°˜ë³µ ê°€ëŠ¥ âœ…

#### âœ… ì‹œë‚˜ë¦¬ì˜¤ 4: ì¥ì‹œê°„ í”Œë ˆì´
- **í…ŒìŠ¤íŠ¸**: 30ë¶„ ì´ìƒ ê²Œì„ ì§„í–‰
- **ì´ì „**: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€, ì†Œë¦¬ ì§€ì—°
- **í˜„ì¬**: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì•ˆì •, ì†Œë¦¬ ì •ìƒ âœ…

---

## ğŸ“ ìˆ˜ì •ëœ íŒŒì¼

### `js/game.js`
- **Line 506-545**: `showRemainderInput()` í•¨ìˆ˜ ìˆ˜ì •
- **Line 546-558**: `handleAnswerKeyPress()` í•¨ìˆ˜ ì¶”ê°€ (ì‹ ê·œ)
- **Line 716-733**: `hideRemainderQuestion()` í•¨ìˆ˜ ìˆ˜ì •
- **Line 570-608**: `submitAnswer()` í•¨ìˆ˜ ìˆ˜ì •
- **Line 879**: `activeOscillators` ë°°ì—´ ì¶”ê°€ (í˜„ì¬ ë¯¸ì‚¬ìš©, í–¥í›„ í™•ì¥ìš©)
- **Line 915-932**: `playDiceSound()` - oscillator ì •ë¦¬ ì¶”ê°€
- **Line 934-958**: `playCorrectSound()` - oscillator ì •ë¦¬ ì¶”ê°€
- **Line 960-978**: `playWrongSound()` - oscillator ì •ë¦¬ ì¶”ê°€
- **Line 980-1002**: `playMoveSound()` - oscillator ì •ë¦¬ ì¶”ê°€
- **Line 1004-1032**: `playWinSound()` - oscillator ì •ë¦¬ ì¶”ê°€
- **Line 1034-1052**: `playClickSound()` - oscillator ì •ë¦¬ ì¶”ê°€

---

## ğŸ¯ ì˜ˆë°© ì¡°ì¹˜

### í–¥í›„ ê°œë°œ ì‹œ ì£¼ì˜ì‚¬í•­

1. **ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ê´€ë¦¬**
   ```javascript
   // âŒ í”¼í•´ì•¼ í•  íŒ¨í„´
   element.onclick = () => { ... }; // ì¤‘ë³µ ê°€ëŠ¥ì„±
   
   // âœ… ê¶Œì¥ íŒ¨í„´
   element.addEventListener('click', namedHandler);
   // ì •ë¦¬ ì‹œ
   element.removeEventListener('click', namedHandler);
   ```

2. **Web Audio API ì‚¬ìš©**
   ```javascript
   // âŒ í”¼í•´ì•¼ í•  íŒ¨í„´
   oscillator.start();
   oscillator.stop(time);
   // ì •ë¦¬ ì—†ìŒ
   
   // âœ… ê¶Œì¥ íŒ¨í„´
   oscillator.start();
   oscillator.stop(time);
   oscillator.onended = () => {
       oscillator.disconnect();
       gainNode.disconnect();
   };
   ```

3. **ë¹„ë™ê¸° ì²˜ë¦¬ ì¤‘ ìƒíƒœ í™•ì¸**
   ```javascript
   // âŒ í”¼í•´ì•¼ í•  íŒ¨í„´
   async function submit() {
       await process();
   }
   
   // âœ… ê¶Œì¥ íŒ¨í„´
   async function submit() {
       if (isProcessing) return;
       isProcessing = true;
       try {
           await process();
       } finally {
           isProcessing = false;
       }
   }
   ```

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [MDN: EventTarget.addEventListener()](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)
- [MDN: EventTarget.removeEventListener()](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener)
- [MDN: Web Audio API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)
- [MDN: OscillatorNode](https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode)

---

## âœ… ê²°ë¡ 

ëª¨ë“  ë©ˆì¶¤ í˜„ìƒì˜ ê·¼ë³¸ ì›ì¸ì„ íŒŒì•…í•˜ê³  ìˆ˜ì • ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ê°œì„ ì‚¬í•­**:
1. âœ… ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¤‘ë³µ ë°©ì§€
2. âœ… ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í•´ê²°
3. âœ… ì¤‘ë³µ ì œì¶œ ë°©ì§€
4. âœ… ì•ˆì •ì ì¸ ì¥ì‹œê°„ í”Œë ˆì´ ê°€ëŠ¥

**í…ŒìŠ¤íŠ¸ ì™„ë£Œ**: ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì •ìƒ ë™ì‘ í™•ì¸

---

**ìˆ˜ì •ì**: AI Assistant  
**ë‚ ì§œ**: 2025-01-13  
**ìƒíƒœ**: âœ… ì™„ë£Œ ë° ë°°í¬ ì¤€ë¹„ ì™„ë£Œ
