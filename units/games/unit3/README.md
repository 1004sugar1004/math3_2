# 🔑 황금 열쇠를 찾아라

원의 반지름 개념을 활용한 수학 교육 게임 - **SVG 모눈종이 버전**

## 📋 프로젝트 개요

초등학생을 위한 수학 교육용 웹 게임으로, 원의 중심과 반지름 개념을 게임을 통해 자연스럽게 학습할 수 있습니다.

## ✨ 완성된 기능

### 1. SVG 기반 정확한 보드 시스템
- ✅ SVG로 구현된 모눈종이 보드판
- ✅ **정확한 좌표 시스템**: 모눈 1칸 = 1cm = 50px
- ✅ **명확한 그리드 라인**: 
  - 1cm 단위 그리드 (회색, 선명하게 표시)
  - 5cm 단위 굵은 그리드 (진한 회색)
  - **섬 안에서도 모눈이 보임** (반투명 배경)
- ✅ **그리드 선 교차점 표시** ⭐:
  - 모든 교차점에 십자(+) 표시 (225개)
  - 각 교차점마다 중심 점 + 가로/세로 십자선
  - 선이 만나는 정확한 지점 시각화
  - 정확한 좌표 인식 가능
- ✅ **눈금자 표시**:
  - 상단과 좌측에 "1칸 = 1cm" 안내
  - 0, 5, 10, 14cm 눈금 표시
- ✅ 섬 모양 게임 영역 디자인
- ✅ 나무, 풀, 보물상자 장식

### 2. 개선된 깃발 선택 시스템 ⭐⭐⭐
- ✅ **깃발 끝이 그리드 선 교차점에 정확히 닿음** ⭐⭐⭐:
  - 모든 깃발이 정수 좌표(선 교차점)에만 위치
  - 심플한 디자인: 기둥 + 사각형 깃발 천 + 번호
  - 깃발 끝(바닥)에 분홍색 점으로 정확한 교차점 표시
  - 참고 이미지와 동일한 스타일
- ✅ **모든 깃발 항상 표시** ⭐:
  - 모든 깃발이 처음부터 보드에 표시됨
  - 선택 가능한 깃발: 진하게 표시 (opacity: 1)
  - 다른 번호 깃발: 흐리게 표시 (opacity: 0.3)
  - 사용된 깃발: 매우 흐리게 표시 (opacity: 0.15)
- ✅ **깃발 애니메이션 제거**:
  - 흔들림 없이 깔끔하게 표시
  - 정신없지 않고 집중하기 좋음
- ✅ **깃발 색상 구분**:
  - 1번 깃발 (빨강색)
  - 2번 깃발 (청록색)
  - 3번 깃발 (보라색)
- ✅ **호버 효과**: 선택 가능한 깃발에 마우스를 올리면 살짝 확대
- ✅ **명확한 시각적 구분**: 어떤 깃발을 클릭해야 하는지 한눈에 파악

### 3. 정확한 원 그리기 시스템 + 컴퍼스 애니메이션 ⭐⭐⭐
- ✅ **깃발 바닥이 원의 중심**: 깃발이 꽂힌 정확한 위치가 원의 중심
- ✅ **정확한 반지름**: 
  - 1번 깃발 = 1cm = 50px = 모눈 1칸
  - 2번 깃발 = 2cm = 100px = 모눈 2칸
  - 3번 깃발 = 3cm = 150px = 모눈 3칸
- ✅ **컴퍼스 애니메이션**:
  - 중심에 바늘 고정
  - 반지름만큼 떨어진 곳에 연필 (컴퍼스 끝)
  - 연필이 360도 회전하며 원 그리기
  - 실제 컴퍼스 사용 경험 제공
- ✅ **모눈으로 반지름 확인**: 섬 안에서도 모눈이 보여 정확한 거리 측정 가능
- ✅ 플레이어 색상으로 원 표시

### 4. 가위바위보 시스템 ⭐⭐⭐
- ✅ **완전 자동 랜덤 선택 시스템** ⭐⭐⭐
  - **혼자하기 모드**: 컴퓨터가 자동으로 가위/바위/보 선택
  - **2인 대결 모드**: 컴퓨터가 양쪽 플레이어 모두의 가위/바위/보를 자동으로 선택
- ✅ "가위바위보 시작!" 버튼 한 번만 클릭
- ✅ 애니메이션 효과로 결과 표시 (아이콘과 승자 표시)
- ✅ **반지름 결정**:
  - 가위 → 2cm 반지름
  - 바위 → 1cm 반지름
  - 보 → 3cm 반지름
- ✅ 2인 대결 시 비기면 다시 시작 가능

### 5. 황금 열쇠 시스템
- ✅ 32개의 황금 열쇠 배치
- ✅ 열쇠 디자인 (열쇠 머리, 몸통, 이빨)
- ✅ 원 안의 열쇠 자동 수집
- ✅ 수집된 열쇠는 플레이어 색상으로 표시
- ✅ 수집 애니메이션 효과

### 6. 게임 진행 시스템
- ✅ **플레이어 이름 커스터마이징** ⭐⭐:
  - 모드 선택 화면에서 플레이어 이름 입력 가능
  - 최대 10글자까지 입력 가능
  - 혼자하기 모드는 플레이어 1 이름만 사용
  - 2인 대결 모드는 두 플레이어 이름 모두 사용
- ✅ **2인용 게임** (한 화면에서 두 명이 플레이)
- ✅ 각 플레이어별 색상 구분 (빨강, 청록)
- ✅ 현재 플레이어 표시
- ✅ 실시간 점수 업데이트
- ✅ **가위바위보 화면 아래 점수 표시** ⭐⭐:
  - 혼자하기: 플레이어 이름 + 현재 열쇠 개수
  - 2인 대결: 양쪽 플레이어 이름 + 현재 열쇠 개수
  - 실시간 업데이트
- ✅ 턴제 진행

### 7. 점수 시스템
- ✅ 플레이어별 획득한 열쇠 개수 표시
- ✅ 모든 열쇠 수집 또는 모든 깃발 사용 시 게임 종료
- ✅ 승자 발표 및 최종 점수 요약

### 8. 사운드 이펙트 ⭐⭐⭐
- ✅ **Web Audio API 기반 사운드** (API 없이 브라우저 내장 기능만 사용):
  - 가위바위보 소리: "가위-바위-보" 멜로디
  - 결과 발표 소리: 승리/무승부 구분
  - 원 그리기 시작: "위잉" 상승 주파수 소리
  - 원 그리기 중: 연속적인 "쓱쓱" 소리
  - 원 완성: "딩!" 종소리
  - 열쇠 수집: "땡그랑" 금속성 소리
  - 깃발 선택: "띵" 선택 소리
  - 버튼 클릭: "탁" 클릭 소리
- ✅ 모든 소리가 실시간으로 생성되어 외부 파일 불필요
- ✅ 볼륨 제어 가능 (기본 30%)

### 9. UI/UX 개선
- ✅ 직관적인 게임 진행 인터페이스
- ✅ 상세한 게임 규칙 안내
- ✅ 반응형 디자인 (모바일/태블릿/PC)
- ✅ 시각적/청각적 피드백 (애니메이션, 색상, 소리)
- ✅ 게임 초기화 기능

### 10. 수학 교육 요소 ⭐⭐⭐
- ✅ **원의 중심 개념**: 깃발 위치가 원의 정확한 중심
- ✅ **원의 반지름 개념**: 1cm, 2cm, 3cm 반지름 학습
- ✅ **컴퍼스 사용법 시각화** ⭐:
  - 중심에 바늘 고정하기
  - 반지름만큼 펼치기
  - 한 바퀴 회전하며 원 그리기
  - 실제 컴퍼스 작동 원리 이해
- ✅ **거리 계산**: 원 안에 점이 있는지 판별
- ✅ **좌표 개념**: 모눈종이 위의 위치 인식
- ✅ **그리드 시스템**: 
  - 1칸 = 1cm의 명확한 척도
  - 눈금자로 거리 확인 가능
  - **섬 안에서도 모눈이 보여** 원의 반지름을 정확하게 측정 가능

## 🔊 사운드 이펙트

**재미있는 소리로 더욱 몰입감 있게!**

### 소리 목록
- 🎵 **가위바위보 소리**: "가위-바위-보" 세 개의 톤 멜로디
- 🎶 **승리 소리**: 상승하는 멜로디 (C-E-G)
- 🎵 **무승부 소리**: 중립적인 두 개의 톤
- 🎶 **원 그리기 시작**: "위잉" 상승 주파수 소리
- 🎵 **원 그리기 중**: 연속적인 "쓱쓱" 소리 (진행도에 따라 피치 변화)
- 🔔 **원 완성**: 맑은 종소리 "딩!"
- 🔑 **열쇠 수집**: "땡그랑" 금속성 소리 (여러 개 수집 시 순차적으로)
- 🚩 **깃발 선택**: "띵" 선택 확인 소리
- 🔲 **버튼 클릭**: "탁" 클릭 소리

### 기술 사항
- Web Audio API 사용 (브라우저 내장 기능)
- 외부 오디오 파일 불필요
- 실시간 소리 생성
- 여러 주파수와 파형 조합으로 풍부한 소리 표현
- 볼륨 제어 가능 (기본 30%)

## 🎮 게임 방법

### 1단계: 플레이어 이름 입력 및 모드 선택 ⭐⭐
- **플레이어 이름 입력**: 원하는 이름으로 변경 가능 (최대 10글자)
  - 플레이어 1: 기본값 "플레이어 1"
  - 플레이어 2: 기본값 "플레이어 2"
  - 혼자하기 모드는 플레이어 1 이름만 사용됨
- **혼자하기** 👤: 컴퓨터가 랜덤으로 결과 선택 → 즉시 원 그리기
- **2인 대결** 👥: 컴퓨터가 양쪽 플레이어의 가위바위보를 자동 선택 → 승자가 원 그리기

### 2단계: 가위바위보 (완전 자동 시스템 ⭐)

**혼자하기 모드:**
1. "가위바위보 시작!" 버튼 클릭
2. 컴퓨터가 자동으로 가위/바위/보 선택
3. 결과에 따라 반지름 결정
4. 즉시 해당 반지름의 깃발 선택 단계로 진행

**2인 대결 모드:**
1. "가위바위보 대결 시작!" 버튼 클릭
2. **컴퓨터가 양쪽 플레이어 모두의 가위/바위/보를 자동으로 선택** ⭐⭐⭐
3. 양쪽 결과를 동시에 표시 (물음표 → 아이콘으로 변경)
4. 승부 판정 (비기면 "다시 시작하세요!" 메시지)
5. 승자 발표 및 반지름 결정
6. 승자가 해당 반지름의 깃발 선택

**반지름 규칙:**
- 가위 → **2cm 반지름**
- 바위 → **1cm 반지름**
- 보 → **3cm 반지름**

### 3단계: 깃발 선택 및 원 그리기
1. **해당 반지름의 깃발이 진하게 표시**됨
2. 원하는 위치의 깃발 클릭
3. **컴퍼스 애니메이션**으로 원이 그려짐
4. 원 안의 황금 열쇠 자동 수집

### 4단계: 점수 및 승자
- 획득한 열쇠 개수만큼 점수 획득
- 다음 플레이어 차례 (2인 대결은 다시 가위바위보)
- 모든 열쇠 수집 시 게임 종료
- 더 많은 열쇠를 모은 플레이어 승리!

## 🎯 학습 목표

- **원의 중심과 반지름 개념 완전 이해**
- **모눈종이에서 거리 측정 능력 향상**
- **좌표평면의 교차점(정수 좌표) 개념 학습** ⭐
- **1cm, 2cm, 3cm 거리 감각 익히기**
- 특정 점으로부터의 거리 계산 (피타고라스 정리 응용)
- 좌표평면에서의 위치 인식
- 전략적 사고 능력 향상

## 🎨 주요 개선사항

### 최신 업데이트 (v3.2.0) ⭐⭐⭐

1. **컴퍼스로 원 그리는 애니메이션** ⭐⭐⭐:
   - ❌ 이전: 원이 한 번에 나타남
   - ✅ 현재: **실제 컴퍼스 사용하듯 원을 그림**
   - **1단계**: 중심점 표시 (깃발 위치)
   - **2단계**: 컴퍼스 바늘 표시 (중심 → 반지름까지 선)
   - **3단계**: 컴퍼스가 360도 회전하며 원을 그림 (2초)
   - **4단계**: 원이 완성되고 열쇠 수집
   - 컴퍼스 끝점이 펄스 애니메이션으로 강조
   - 학생들이 실제 컴퍼스 사용법을 시각적으로 학습

2. **모든 깃발 항상 표시 + 진하기 조절** ⭐⭐:
   - ❌ 이전: 선택 가능한 깃발만 나타남 + 흔들림 애니메이션
   - ✅ 현재: **모든 깃발이 항상 표시되고 진하기로 구분**
   - **선택 가능한 깃발**: 진하게 표시 (opacity: 1)
   - **다른 번호 깃발**: 흐리게 표시 (opacity: 0.3)
   - **사용된 깃발**: 매우 흐리게 표시 (opacity: 0.15)
   - **애니메이션 제거**: 흔들림 없이 깔끔하게 표시
   - 정신없지 않고 집중하기 좋음

2. **2인용 게임으로 변경** ⭐⭐⭐:
   - ❌ 이전: 4명의 플레이어
   - ✅ 현재: **2명이 한 화면에서 게임**
   - 플레이어 1 (빨강) vs 플레이어 2 (청록)
   - 턴제로 번갈아가며 플레이
   - 더 많은 열쇠를 모은 사람이 승리

3. **완전 자동 랜덤 가위바위보 시스템** ⭐⭐⭐:
   - ❌ 이전: 플레이어가 가위바위보 선택 → 컴퓨터와 대결
   - ✅ 현재: **컴퓨터가 모든 선택을 자동으로 처리**
   - **혼자하기**: 컴퓨터가 랜덤 선택 → 즉시 원 그리기
   - **2인 대결**: 컴퓨터가 양쪽 플레이어 모두 랜덤 선택 → 승부 판정 → 승자가 원 그리기
   - "가위바위보 시작!" 버튼 한 번만 클릭
   - 애니메이션으로 결과 표시 (? → 아이콘)
   - 즉시 반지름 확인 가능
   - 완전히 공평한 게임 진행 (사람의 선택 개입 없음)

4. **깃발 끝이 그리드 교차점에 정확히 위치** ⭐:
   - JavaScript로 그리드 선을 정확하게 그림
   - 15개의 가로선 + 15개의 세로선 = 225개 교차점
   - 깃발 끝이 정확한 교차점에 위치
   - 심플한 디자인: 기둥 + 사각형 깃발 + 번호
   - 깃발 끝에 분홍색 점으로 교차점 표시

5. **정확한 그리드 시스템**:
   - 개별 선으로 그려진 정확한 그리드
   - 5칸마다 굵은 선 (0, 5, 10 위치)
   - 모든 그리드 교차점에 작은 회색 점 표시 (225개)
   - 선이 교차하는 지점을 명확히 확인 가능

### 이전 개선사항

1. **보드판 구성**: 
   - ❌ 외부 이미지 사용, 좌표 불정확
   - ✅ SVG 기반 정확한 모눈종이 시스템

2. **원의 중심**:
   - ❌ 깃발 전체가 중심처럼 보임
   - ✅ 깃발 바닥의 정확한 점이 중심

3. **모눈 척도**:
   - ❌ 1cm 개념이 모호함, 그리드가 흐릿함
   - ✅ 명확한 그리드 라인 + 눈금자 표시

## 📁 파일 구조

```
황금열쇠찾아라/
├── index.html          # 메인 HTML 파일 (SVG 보드, 눈금자 포함)
├── css/
│   └── style.css       # 스타일시트 (애니메이션 포함)
├── js/
│   └── game.js         # 게임 로직 JavaScript
└── README.md           # 프로젝트 문서
```

## 🚀 실행 방법

1. 웹 브라우저에서 `index.html` 파일을 엽니다
2. 게임이 자동으로 시작됩니다
3. 규칙을 읽고 플레이를 시작하세요!

## 🔧 기술 스택

- **HTML5**: 게임 구조
- **CSS3**: 스타일링, 애니메이션, 호버 효과
- **Vanilla JavaScript**: 게임 로직
- **SVG**: 벡터 그래픽 기반 정확한 보드판 구현
  - 모눈종이 패턴 (1cm, 5cm 단위)
  - 눈금자 (상단, 좌측)
  - 반투명 배경 (모눈 가시성)
  - 깃발 마커 (동적 생성/제거)
  - 황금 열쇠
  - 원 그리기
  - 장식 요소

## 📱 반응형 지원 ⭐⭐⭐

**한 화면에 모든 것이! 스크롤 없는 완벽한 뷰포트 최적화!**

### 초대형 데스크톱 (1400px+ / 900px+)
- ✅ **스크롤 없이 한 화면에 완벽 표시**
- 게임 보드: 700px (더 크고 선명하게)
- 모든 요소가 뷰포트에 딱 맞게
- 최고의 게임 플레이 경험

### 데스크톱/노트북 (769px+ / 700px+)
- ✅ **스크롤 없이 한 화면에 완벽 표시**
- 게임 보드: 600px (최적 크기)
- 정보 패널이 가로로 펼쳐짐
- 뷰포트 높이 기반 자동 조절

### 태블릿 (768px 이하)
- 세로 스크롤로 편안한 탐색
- 터치 친화적인 UI
- 유연한 레이아웃

### 모바일 (480px 이하)
- 초소형 화면 최적화
- 큰 터치 영역
- 한 손 조작 가능

## 🎨 디자인 특징

- 보라색 그라데이션 배경
- SVG 기반 벡터 그래픽 (확대해도 선명)
- **명확한 모눈종이 그리드** (1cm, 5cm 단위)
- **반투명 섬 배경** (모눈이 섬 안에서도 보임)
- **눈금자 표시** (0, 5, 10, 14cm)
- **"1칸 = 1cm" 안내 텍스트**
- **선택 가능한 깃발만 표시** (혼란 없음)
- 플레이어별 구분되는 색상
- 깃발 반짝임 애니메이션
- 원 그리기 애니메이션
- 열쇠 수집 애니메이션

## 📈 향후 개선 사항

### 추천 기능 추가
- [ ] 사운드 효과 추가 (버튼 클릭, 열쇠 획득 등)
- [ ] 더 많은 애니메이션 효과
- [ ] 게임 기록 저장 기능 (로컬 스토리지)
- [ ] 난이도 선택 (보드 크기, 깃발 수 조정)
- [ ] 멀티플레이어 온라인 모드
- [ ] 리더보드 시스템
- [ ] 자 도구 추가 (거리 측정 도구)
- [ ] 확대/축소 기능

### 교육 기능 강화
- [ ] 거리 계산 공식 설명 모달
- [ ] 원의 넓이 계산 보여주기 (πr²)
- [ ] 학습 진도 추적
- [ ] 교사용 관리 모드
- [ ] 문제 풀이 모드 (특정 열쇠를 획득하려면?)
- [ ] 원의 방정식 학습 모드

## 👥 대상 사용자

- 초등학교 3-6학년 학생 (2명)
- 수학 교육 관련 교사
- 학부모 (자녀 교육용)
- 친구들과 함께 플레이하는 게임

## 📚 교육 활용 방법

### 교사/학부모용 가이드

1. **게임 전**: 
   - 원의 중심, 반지름 개념 설명
   - **그리드 선 교차점 개념 설명** (선이 만나는 점)
   - 좌표평면의 격자점 개념
   
2. **게임 중**: 
   - **깃발이 그리드 선이 교차하는 십자 지점에 정확히 위치한 것 확인**
   - **선을 따라 세면서 반지름 확인하기**
   - "원의 반지름이 2cm인데, 선 교차점을 세면 몇 개일까?"
   - "중심 교차점에서 오른쪽으로 선 2개, 위로 선 2개 지나면 원 위의 점일까?"
   - "이 열쇠는 중심 교차점에서 선 몇 개 떨어져 있을까?"
   - "왜 이 열쇠가 원 안에 들어갔을까?" 질문
   - 거리 계산 방법 토론 (가로 거리² + 세로 거리²)
   
3. **게임 후**: 
   - 어느 위치가 가장 많은 열쇠를 얻을 수 있었는지 분석
   - 전략 토론
   - 원의 방정식 개념 소개 (중학교 과정 연계)

## 📝 라이선스

이 프로젝트는 교육 목적으로 자유롭게 사용 가능합니다.

---

**개발일**: 2025년 1월
**버전**: 4.6.2 (컴퍼스 애니메이션 개선)
**최신 변경사항**: 
- ⭐⭐ **컴퍼스 애니메이션 개선** ⭐⭐
  - 12시 방향(위쪽)에서 시작
  - 원을 따라 부드럽게 시계방향 회전
  - 원 그리기와 완벽하게 동기화
  - 더 자연스럽고 덜 정신없는 애니메이션
- ⭐⭐ **게임 규칙 토글 기능**
  - "게임 방법" 클릭으로 접기/펼치기 가능
  - 부드러운 애니메이션 효과
  - 공간 활용 극대화
- ⭐ **플레이어 이름 입력창 최적화**
  - 입력창 너비 120px로 축소
  - 중앙 정렬로 깔끔한 배치

**이전 버전 (4.6.0)**:
- ⭐⭐⭐ **2열 레이아웃으로 한 화면 최적화**
  - 왼쪽: 게임 컨트롤 (정보, 가위바위보, 깃발 선택)
  - 오른쪽: 게임 보드 (SVG 맵)
  - PC/대형 태블릿에서 스크롤 없이 모든 요소 표시
  - 1024px 이하에서는 자동으로 1열 레이아웃으로 전환
  - 더 효율적인 공간 활용

**이전 버전 (4.5.0)**:
- ⭐⭐⭐ **재미있는 사운드 이펙트** ⭐⭐⭐
  - Web Audio API로 구현한 8가지 사운드
  - 가위바위보 멜로디, 승리/무승부 소리
  - 원 그리기 소리 (시작, 진행, 완료)
  - 열쇠 수집 금속성 소리
  - 깃발 선택, 버튼 클릭 소리
  - API 없이 브라우저 내장 기능만 사용
  - 실시간 소리 생성으로 경량 구현

**이전 버전 (4.4.0)**:
- ⭐⭐⭐ **PC/태블릿 한 화면 완벽 최적화**
  - 스크롤 없이 모든 요소가 한 화면에 표시
  - 게임 보드 크기 자동 조절 (650px 최대)
  - 초소형 패딩/마진으로 공간 효율 극대화
  - 뷰포트 높이 기반 자동 레이아웃 조정
  - 대형 화면(1400px+)에서 더 큰 보드(700px)
- ⭐⭐⭐ **완전 반응형 레이아웃**
  - PC/태블릿/모바일 모두 최적화
  - 5단계 반응형 브레이크포인트
  - 모든 디바이스에서 완벽한 사용자 경험
  - 스마트폰에서도 모든 기능 완벽 작동
- ⭐⭐ **극도로 컴팩트한 UI**
  - 최소화된 패딩과 마진
  - 정보 패널이 가로로 펼쳐짐
  - 모든 텍스트 크기 최적화
  - 버튼과 아이콘 크기 조정

**이전 버전 (4.2.0)**:
- ⭐⭐ **플레이어 이름 커스터마이징**
  - 모드 선택 화면에서 원하는 이름 입력 가능
  - 게임 내 모든 화면에 입력한 이름 표시
  - 최대 10글자 지원
- ⭐⭐ **가위바위보 화면 아래 실시간 점수 표시**
  - 혼자하기 모드: 플레이어 이름 + 현재 열쇠 개수
  - 2인 대결 모드: 양쪽 플레이어 이름 + 현재 열쇠 개수
  - 열쇠 획득 시 즉시 업데이트

**이전 버전 (4.1.0)**:
- ⭐⭐⭐ **완전 자동 랜덤 가위바위보 시스템**
  - 혼자하기: 컴퓨터가 자동 선택
  - 2인 대결: 컴퓨터가 양쪽 플레이어 모두 자동 선택
  - 사람의 선택 개입 없이 완전히 공평한 게임
- ⭐⭐⭐ **게임 모드 선택 시스템** (혼자하기 / 2인 대결)
- ⭐⭐⭐ **2인 가위바위보 대결 모드**
  - 컴퓨터가 양쪽 모두 선택 (물음표 → 아이콘 애니메이션)
  - 승부 판정 및 승자 발표
  - 비기면 다시 시작
  - 승자가 원 그리기
- 컴퍼스로 원 그리는 애니메이션
- 모든 깃발 항상 표시 (선택 가능한 것만 진하게)
- 깃발 흔들림 완전 제거
- 깃발 끝이 그리드 선 교차점에 정확히 위치
