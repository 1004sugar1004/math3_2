# 🏆 들이의 어림왕

초등학교 수학 3-2 교과서의 "들이의 어림왕" 탐구 놀이를 인터랙티브 웹 애플리케이션으로 구현한 교육용 게임입니다.

## 📚 프로젝트 개요

이 프로젝트는 초등학생들이 들이(부피)의 개념을 재미있게 학습할 수 있도록 설계된 웹 기반 교육 게임입니다. 실제 교과서의 탐구 활동을 디지털화하여 언제 어디서나 접근 가능하며, 게임 기록을 저장하여 학습 진행 상황을 추적할 수 있습니다.

## 🎯 주요 기능

### ✅ 완성된 기능

#### 1. 게임 설정
- **멀티플레이어 지원**: 2~4명의 플레이어 선택 가능
- **플레이어 이름 입력**: 각 플레이어의 이름을 커스터마이징
- **직관적인 UI**: 초등학생 친화적인 밝고 즐거운 디자인

#### 2. 1단계: 컵의 들이 어림하기
- **4가지 실제 3D 컵 이미지 제공**:
  - 종이컵 (190mL) - 일회용 커피컵
  - 머그컵 (350mL) - 손잡이 달린 세라믹 컵
  - 작은 플라스틱컵 (150mL) - 투명 일회용 컵
  - 큰 플라스틱컵 (500mL) - 편의점 음료컵 크기
- **250mL 기준 계량컵**: 크기 비교를 위한 참고 이미지 제공
- **어림 입력**: 각 컵의 들이를 예상하여 입력
- **정확도 계산**: 실제 들이와 비교하여 오차 계산
- **순위 결정**: 평균 오차가 적은 순서대로 2단계 턴 순서 결정
- **상세 결과 표시**: 각 컵별 예상값, 실제값, 오차 표시

#### 3. 2단계: 들이 맞추기 게임
- **목표 설정**: 1000mL(1L)를 목표로 물 맞추기
- **턴제 진행**: 1단계 순위대로 턴 진행
- **주사위 시스템**: 
  - 클릭으로 주사위 굴리기
  - 애니메이션 효과
  - 1~6의 랜덤 숫자 생성
- **다중 컵 선택 (v1.3 신규)**: 
  - 주사위 눈의 수만큼 컵을 여러 번 선택 가능
  - 같은 컵을 여러 번 선택할 수 있음
  - 예: 주사위 3 → 종이컵 + 머그컵 + 종이컵 선택 가능
- **선택 순서 시각화 (v1.3 신규)**:
  - 선택한 컵들을 순서대로 카드 형태로 표시
  - 각 카드: 순번, 이미지, 이름, 들이 표시
  - × 버튼으로 개별 선택 취소 가능
  - (2/5) 형태로 진행 상황 표시
- **실시간 들이 표시**: 
  - 각 플레이어의 현재 들이 시각화
  - 물 애니메이션 효과
  - 목표까지 남은 양 표시
- **턴 기록**: 각 플레이어의 모든 턴 내역 저장

#### 4. 게임 결과 및 기록
- **우승자 발표**: 목표 들이와의 오차가 가장 적은 플레이어
- **최종 순위**: 모든 플레이어의 순위 및 상세 기록
- **턴별 상세 내역**: 각 플레이어의 턴별 주사위, 선택 컵, 누적 들이
- **게임 기록 저장**: RESTful Table API를 통한 데이터 저장
- **축하 애니메이션**: 우승자 발표 시 컨페티 효과

#### 5. 리더보드 (명예의 전당)
- **역대 최고 기록**: 모든 게임 기록 조회
- **정렬 기능**: 총점 기준 오름차순 정렬 (낮을수록 우수)
- **상세 정보**: 플레이어 이름, 게임 날짜, 어림 오차, 최종 오차, 총점
- **상위 3명 강조**: 금색 배경으로 상위 랭커 표시

## 🎮 게임 플로우

```
1. 시작 화면
   ↓
2. 플레이어 수 선택 (2~4명)
   ↓
3. 플레이어 이름 입력
   ↓
4. 1단계: 컵 들이 어림하기
   - 각 플레이어가 순서대로 4개 컵의 들이 예상
   ↓
5. 어림 결과 확인
   - 정확도 순위 발표
   ↓
6. 2단계: 들이 맞추기 게임
   - 순위대로 턴 진행
   - 주사위 굴리기 → 컵 선택 → 물 옮기기
   ↓
7. 게임 결과
   - 우승자 발표
   - 최종 순위 및 상세 기록
   ↓
8. 리더보드 저장 및 조회
```

## 🛠️ 기술 스택

### Frontend
- **HTML5**: 시맨틱 마크업
- **CSS3**: 
  - Tailwind CSS (CDN)
  - 커스텀 애니메이션 (물 효과, 주사위 굴리기, 컨페티)
  - 그라디언트 디자인
- **JavaScript (ES6+)**:
  - 비동기 처리 (async/await)
  - Fetch API
  - 이벤트 핸들링
  - DOM 조작

### Backend (Data Storage)
- **RESTful Table API**: 게임 기록 저장 및 조회

### 라이브러리
- **Tailwind CSS**: 빠른 스타일링
- **Font Awesome**: 아이콘
- **Google Fonts (Noto Sans KR)**: 한글 폰트

## 📊 데이터 모델

### game_records 테이블

| 필드명 | 타입 | 설명 |
|--------|------|------|
| id | text | 고유 ID (자동 생성) |
| player_name | text | 플레이어 이름 |
| estimation_accuracy | number | 어림 정확도 점수 (평균 오차) |
| final_difference | number | 최종 들이 오차 (mL) |
| total_score | number | 총점 (낮을수록 우수) |
| game_date | datetime | 게임 날짜 |

## 📁 프로젝트 구조

```
.
├── index.html          # 메인 HTML 파일
├── js/
│   └── game.js        # 게임 로직 JavaScript
├── images/
│   ├── cup-paper-190ml.png           # 종이컵 3D 이미지
│   ├── cup-mug-350ml.png             # 머그컵 3D 이미지
│   ├── cup-small-plastic-150ml.png   # 작은 플라스틱컵 3D 이미지
│   ├── cup-large-plastic-500ml.png   # 큰 플라스틱컵 3D 이미지
│   └── cup-reference-250ml.png       # 기준 계량컵 3D 이미지
└── README.md          # 프로젝트 문서
```

## 🚀 기능 진입점 (URI)

### 메인 페이지
- **경로**: `/index.html` 또는 `/`
- **설명**: 게임 시작 화면

### API 엔드포인트 (RESTful Table API)

#### 1. 게임 기록 조회
```
GET /tables/game_records
Query Parameters:
  - page: 페이지 번호 (기본값: 1)
  - limit: 페이지당 레코드 수 (기본값: 100)
  - sort: 정렬 기준 (예: total_score)
```

#### 2. 게임 기록 추가
```
POST /tables/game_records
Body (JSON):
{
  "player_name": "플레이어1",
  "estimation_accuracy": 25.5,
  "final_difference": 50,
  "total_score": 75.5,
  "game_date": "2025-01-08T12:00:00Z"
}
```

## 🎨 디자인 특징

### 색상 팔레트
- **Primary**: Purple (#667eea ~ #764ba2)
- **Secondary**: Pink (#f093fb ~ #f5576c)
- **Accent**: Yellow (#fbbf24)
- **Water**: Blue (#4facfe ~ #00f2fe)

### 애니메이션
- **물 효과**: 그라디언트 회전 애니메이션
- **주사위 굴리기**: 360도 회전 애니메이션
- **컨페티**: 낙하 및 회전 애니메이션
- **트로피**: 상하 바운스 애니메이션
- **호버 효과**: 카드 상승 효과

### 반응형 디자인
- **모바일**: 1열 그리드
- **태블릿**: 2열 그리드
- **데스크톱**: 4열 그리드

## 🎓 교육적 가치

### 학습 목표
1. **들이의 개념 이해**: 다양한 용기의 부피 감각 익히기
2. **어림 능력 향상**: 시각적 정보를 바탕으로 수량 예측하기
3. **수학적 사고**: 목표 수량 달성을 위한 전략적 선택
4. **덧셈 연습**: 컵의 들이를 더하여 총량 계산하기

### 게임 요소
- **경쟁**: 플레이어 간 순위 경쟁
- **보상**: 우승자 발표 및 리더보드 등재
- **전략**: 주사위 결과에 따른 최적의 컵 선택
- **피드백**: 즉각적인 결과 확인 및 오차 표시

## 🔜 향후 개발 계획

### 추가 예정 기능
1. **난이도 선택**:
   - 쉬움: 현재 설정 (목표 1000mL)
   - 보통: 목표 1500mL, 컵 종류 6개
   - 어려움: 목표 2000mL, 컵 종류 8개

2. **다양한 게임 모드**:
   - **연습 모드**: 혼자서 연습하기
   - **타임어택**: 시간 제한 모드
   - **정확도 챌린지**: 오차 5% 이내 맞추기

3. **시각적 개선**:
   - 실제 컵 이미지 사용
   - 3D 물 붓기 애니메이션
   - 음향 효과 추가

4. **교육 기능 강화**:
   - **학습 모드**: 들이 단위 설명 및 문제 풀이
   - **통계 대시보드**: 개인별 학습 진행 상황 추적
   - **성취 배지**: 목표 달성 시 배지 수여

5. **소셜 기능**:
   - 친구와 대결 모드
   - 전국 랭킹 시스템
   - 게임 결과 공유 기능

6. **접근성 개선**:
   - 스크린 리더 지원
   - 키보드 네비게이션
   - 색맹 모드

## ✨ 최근 업데이트 (v1.5)

### 🔊 사운드 효과 추가 (v1.5)
- **Web Audio API 활용**: 코드로 생성하는 다양한 효과음
- **게임 효과음**:
  - 🎲 주사위 굴리기: "딸각딸각" 소리
  - ✨ 주사위 결과: "띠링!" 소리
  - 🥤 컵 선택: "뿅!" 소리
  - ❌ 선택 취소: "뿡!" 소리
  - 💧 물 붓기: "촤르르~" 소리
  - 🔘 버튼 클릭: "톡!" 소리
  - 📊 어림 확인: "삐비빅!" 소리
  - 🔄 턴 변경: "따란~" 소리
  - 🏆 승리: "따라라라란!" 팡파레
  - 🤝 무승부: "따라란~" 화음
  - ⚠️ 에러: "빠빠!" 경고음
- **사운드 토글 버튼**: 
  - 우측 상단 고정 버튼
  - 클릭으로 켜기/끄기 전환
  - 🔊 켜짐 / 🔇 꺼짐 아이콘 표시
  - 상태가 시각적으로 표시됨

## ✨ 이전 업데이트 (v1.4)

### 🤝 무승부 처리 (v1.4)
- **동점자 인식**: 2단계에서 같은 오차로 비긴 경우 자동 감지
- **무승부 표시**: 
  - "무승부!" 타이틀 표시
  - "비겼습니다! 🤝" 메시지
  - 트로피(🏆) 대신 악수(🤝) 이모지 표시
- **공동 순위**: 동점자들을 같은 순위로 표시
  - 예: 2명이 1위로 비긴 경우 → 모두 "1위" 표시
  - 공동 1위자는 노란색 배경으로 강조
  - 다음 순위는 자동으로 3위부터 시작

## ✨ 이전 업데이트 (v1.3)

### 🎲 게임 로직 대폭 개선 (v1.3)
- **다중 컵 선택**: 주사위 숫자만큼 컵을 여러 번 선택 가능
  - 주사위 5 → 5개의 컵 선택 가능 (같은 컵 중복 선택도 가능)
- **선택 순서 시각화**: 선택한 컵들을 순서대로 표시
  - 번호가 매겨진 카드 형태로 표시
  - 각 컵의 이미지, 이름, 들이 표시
- **선택 취소 기능**: 잘못 선택한 컵을 × 버튼으로 제거 가능
- **진행 상황 표시**: (2/5) 형태로 선택 진행률 표시
- **스마트 UI**: 
  - 모든 선택 완료 시 컵 선택 비활성화
  - 선택 완료 버튼은 필요한 개수를 다 선택해야 활성화

### 📝 UX 개선 (v1.2)
- **명확한 메시지**: "컵을 선택하세요. 단 N번만 물을 옮길 수 있습니다." 메시지로 혼란 방지
- **게임 규칙 안내**: 2단계 게임 화면에 승리 조건 및 게임 규칙 명시
- **1000mL 목표 강조**: "1000mL에 가장 가까운 사람이 승리" 안내 추가
- **시각적 강조**: 노란색 박스로 중요 메시지 하이라이트

### 🎨 3D 컵 이미지 적용 (v1.1)
- **실제감 있는 3D 이미지**: AI 생성 기술로 제작된 사실적인 컵 이미지
- **250mL 기준 컵**: 크기 비교를 위한 계량컵 이미지 제공
- **시각적 학습 강화**: 실제 컵의 크기와 모양을 정확하게 파악 가능

### 🔧 버그 수정 (v1.1)
- **2단계 진행 버그 수정**: forEach 대신 for...of 루프 사용으로 안정성 향상
- **입력 검증 개선**: 컵 어림 값 입력 시 더 안정적인 검증 로직

## 🐛 알려진 제한사항

- 음향 효과가 없어 청각적 피드백이 제한적입니다.
- 오프라인 모드는 지원하지 않습니다.

## 📝 사용 방법

1. **게임 시작**:
   - 브라우저에서 `index.html` 열기
   - 플레이어 수 선택 (2~4명)
   - 각 플레이어의 이름 입력

2. **1단계 진행**:
   - 각 플레이어가 순서대로 4개 컵의 들이 예상 입력
   - "어림 완료!" 버튼 클릭
   - 모든 플레이어가 완료하면 결과 확인

3. **2단계 진행**:
   - 순위대로 턴 진행
   - 주사위 클릭하여 굴리기
   - 나온 숫자만큼 물을 옮길 컵 선택
   - "선택 완료" 버튼 클릭

4. **결과 확인**:
   - 우승자 및 최종 순위 확인
   - 리더보드에서 역대 기록 조회

## 🎉 특징

- **교육용**: 초등학생의 들이 개념 학습에 최적화
- **재미**: 게임 요소로 학습 동기 부여
- **직관적**: 쉽고 간단한 조작 방법
- **반응형**: 다양한 기기에서 플레이 가능
- **기록 관리**: 모든 게임 기록 자동 저장

## 📞 문의 및 피드백

이 프로젝트는 교육 목적으로 제작되었습니다. 개선 사항이나 버그를 발견하시면 언제든지 알려주세요!

---

**🏆 들이의 어림왕과 함께 즐겁게 수학을 배워보세요!**
