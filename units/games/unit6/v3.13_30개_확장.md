# 🎮 v3.13 업데이트: 30개까지 확장!

## 📅 업데이트 일자
2025년 1월 13일

---

## 🎯 업데이트 목표

**사용자 요청**: "30개까지 등록할 수 있도록 그림그래프에서 모둠별 3행으로 콩주머니 입력칸을 만들어줘"

### 핵심 변경사항
✅ **모든 모둠에 항상 3행(30칸) 표시**  
✅ **던지기 횟수 1~30개로 확장**  
✅ **그래프 테이블 헤더 수정**

---

## 🔧 주요 변경사항

### 1️⃣ 그래프 테이블 구조 변경 (js/game.js)

#### 변경 전 (v3.12)
```javascript
// 한 행당 셀 개수 (10개)
const cellsPerRow = 10;
// 최대 행 수 (3행 = 30개까지)
const maxRowsAllowed = 3;

// 표 형식 그래프 생성
elements.graphTableBody.innerHTML = '';
gameState.teams.forEach((team, teamIndex) => {
    // 각 모둠의 최대 점수 확인
    const teamScore = team.score;
    
    // 필요한 행 수 계산 (10개씩 끊어서, 최대 3행)
    const rowsNeeded = Math.min(maxRowsAllowed, Math.max(1, Math.ceil(teamScore / cellsPerRow)));
```

**문제점**: 점수에 따라 행 수가 동적으로 생성됨 (1~10개 = 1행, 11~20개 = 2행)

#### 변경 후 (v3.13) ✅
```javascript
// 한 행당 셀 개수 (10개)
const cellsPerRow = 10;
// 고정 행 수 (항상 3행 = 30개까지)
const fixedRows = 3;

// 표 형식 그래프 생성
elements.graphTableBody.innerHTML = '';
gameState.teams.forEach((team, teamIndex) => {
    // 모든 모둠에 항상 3행을 표시
    const rowsNeeded = fixedRows;
```

**개선점**: 모든 모둠이 항상 3행(30칸)을 가짐!

---

### 2️⃣ 눈금 라벨 생성 로직 변경 (js/game.js)

#### 변경 전 (v3.12)
```javascript
// 눈금 라벨 생성 (1~10, 11~20, 21~30)
elements.scaleLabels.innerHTML = '';

// 최대 행 수 찾기 (최대 3행)
const maxRows = Math.min(maxRowsAllowed, Math.max(...gameState.teams.map(team => 
    Math.max(1, Math.ceil(team.score / cellsPerRow))
)));

// 각 행마다 1~10 라벨 생성 (최대 3행)
for (let rowIndex = 0; rowIndex < maxRows; rowIndex++) {
```

#### 변경 후 (v3.13) ✅
```javascript
// 눈금 라벨 생성 (1~10, 11~20, 21~30)
elements.scaleLabels.innerHTML = '';

// 항상 3행 표시
const maxRows = fixedRows;

// 각 행마다 1~10 라벨 생성 (3행 고정)
for (let rowIndex = 0; rowIndex < maxRows; rowIndex++) {
```

**개선점**: 항상 1~30 눈금 표시!

---

### 3️⃣ 던지기 횟수 설정 확장 (index.html)

#### 변경 전 (v3.11/v3.12)
```html
<div class="form-group">
    <label for="bagsPerPlayer">
        <i class="fas fa-shopping-bag"></i> 한 명당 던지기 횟수
        <span class="help-text">1 ~ 5개</span>
    </label>
    <input type="number" id="bagsPerPlayer" min="1" max="5" value="5">
</div>
```

#### 변경 후 (v3.13) ✅
```html
<div class="form-group">
    <label for="bagsPerPlayer">
        <i class="fas fa-shopping-bag"></i> 한 명당 던지기 횟수
        <span class="help-text">1 ~ 30개</span>
    </label>
    <input type="number" id="bagsPerPlayer" min="1" max="30" value="5">
</div>
```

**개선점**: 최대 30개까지 던질 수 있음!

---

### 4️⃣ 테이블 헤더 수정 (index.html)

#### 변경 전 (v3.12)
```html
<table class="graph-table" id="graphTable">
    <thead>
        <tr>
            <th class="header-team">모둠</th>
            <th class="header-count" colspan="10">콩 주머니 수</th>
        </tr>
    </thead>
```

#### 변경 후 (v3.13) ✅
```html
<table class="graph-table" id="graphTable">
    <thead>
        <tr>
            <th class="header-team">모둠</th>
            <th class="header-count" colspan="30">콩 주머니 수 (최대 30개)</th>
        </tr>
    </thead>
```

**개선점**: 헤더가 30칸에 맞게 확장!

---

## 📊 그래프 구조 (v3.13)

### 3행 고정 구조
```
┌─────────┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐
│  모둠   │1 │2 │3 │4 │5 │6 │7 │8 │9 │10│  ← 1행 (1~10)
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │11│12│13│14│15│16│17│18│19│20│  ← 2행 (11~20)
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │21│22│23│24│25│26│27│28│29│30│  ← 3행 (21~30)
└─────────┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘
```

### 예시: 4개 모둠, 각 3행씩
```
┌─────────┬──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐
│  모둠   │1 │2 │3 │4 │5 │6 │7 │8 │9 │10│
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│ 희망    │🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│  │  │  ← 8개
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │  │  │  │  │  │  │  │  │  │  │
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │  │  │  │  │  │  │  │  │  │  │
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│ 미래    │🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│  ← 15개
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │🎒│🎒│🎒│🎒│🎒│  │  │  │  │  │
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │  │  │  │  │  │  │  │  │  │  │
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│ 최강    │🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│  ← 25개
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│🎒│
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │🎒│🎒│🎒│🎒│🎒│  │  │  │  │  │
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│ 사랑    │🎒│🎒│🎒│  │  │  │  │  │  │  │  ← 3개
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │  │  │  │  │  │  │  │  │  │  │
├─────────┼──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│         │  │  │  │  │  │  │  │  │  │  │
└─────────┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘
```

---

## ✨ 기능 개선사항

### ✅ 완료된 기능
1. **모든 모둠에 3행 고정 표시**
   - 점수가 적어도 항상 30칸 표시
   - 일관된 그래프 구조

2. **던지기 횟수 확장**
   - 1~5개 → 1~30개로 확장
   - 최대 30개까지 던질 수 있음

3. **눈금 표시**
   - 항상 1~30 눈금 표시
   - 1행: 1~10
   - 2행: 11~20
   - 3행: 21~30

4. **드래그 앤 드롭 지원**
   - 3행 전체에 순차적으로 채우기
   - 1행이 다 차면 자동으로 2행으로 이동
   - 2행이 다 차면 자동으로 3행으로 이동

5. **숫자 입력 지원**
   - 0~30 입력 가능
   - 자동으로 3행에 걸쳐 배치

---

## 🎓 교육적 효과

### v3.13 추가 학습 효과
1. **십진법 심화 학습**
   - 1~10, 11~20, 21~30 단위
   - 10개씩 묶음 개념

2. **큰 수 세기**
   - 30까지의 큰 수 세기
   - 행 단위로 묶어서 세기

3. **표 읽기 능력**
   - 다중 행 표 읽기
   - 연속된 수 찾기

4. **데이터 시각화**
   - 많은 양의 데이터를 표로 정리
   - 모둠 간 비교가 더 명확함

---

## 🧪 테스트 결과

### ✅ 테스트 완료
- [x] 페이지 로딩 정상
- [x] 콘솔 에러 없음
- [x] 3행 그래프 생성 정상
- [x] 드래그 앤 드롭 작동
- [x] 숫자 입력 작동 (0~30)
- [x] 정답 확인 정상

### 콘솔 로그
```
📝 [WARNING] cdn.tailwindcss.com should not be used in production.
📝 [WARNING] The AudioContext was not allowed to start.

⏱️ Page load time: 19.50s
🔍 Total console messages: 2
```

**결과**: 정상 작동! ✅

---

## 📝 사용 방법

### 게임 설정
1. **모둠 수**: 2~8개 선택
2. **인원**: 1~6명 선택
3. **던지기 횟수**: **1~30개** 선택 (v3.13 확장!)
4. **난이도**: 쉬움/보통/어려움/전문가

### 그림그래프 그리기
1. **방법 1: 드래그**
   - 왼쪽 콩 주머니 아이콘 드래그
   - 자동으로 1행 → 2행 → 3행 순차 채우기

2. **방법 2: 숫자 입력**
   - 모둠 이름 아래 숫자 입력 (0~30)
   - ✓ 적용 버튼 클릭
   - 자동으로 3행에 걸쳐 배치

3. **삭제**
   - 채워진 칸 클릭 → 자동으로 앞으로 당겨짐

---

## 🎯 v3.13 핵심 특징

### 🆕 새로운 기능
✅ **30개까지 확장**: 1~30개 던지기 가능  
✅ **3행 고정 그래프**: 모든 모둠에 항상 3행 표시  
✅ **일관된 구조**: 점수와 관계없이 동일한 그래프 구조  
✅ **눈금 고정**: 항상 1~30 눈금 표시

### 🔧 유지된 기능
✅ 3D 훌라후프 (v3.12)  
✅ 빨려들어가는 효과 (v3.12)  
✅ 정교한 타이밍 시스템 (v3.9)  
✅ 순차 자동 채우기 (v3.3+)  
✅ 숫자 직접 입력 (v3.2+)  
✅ 정답 확인 시스템

---

## 🚀 다음 단계

### 선택적 개선사항
- [ ] 그래프 인쇄 기능
- [ ] 결과 PDF 저장
- [ ] 다양한 아이콘 스킨
- [ ] 배경 음악 추가

---

## 📞 변경 파일 목록

### 수정된 파일
1. **js/game.js**
   - `initGraphWorkspace()` 함수 수정
   - 3행 고정 로직 구현

2. **index.html**
   - 던지기 횟수 입력 범위 변경 (1~30)
   - 테이블 헤더 colspan 수정 (30)

### 추가된 파일
1. **v3.13_30개_확장.md** (본 문서)

---

## 🎉 완성!

**v3.13 업데이트 완료!**

이제 모든 모둠이 항상 3행(30칸)의 그래프를 가지게 되었습니다.  
최대 30개까지 던질 수 있어서 더 다양한 수업 활동이 가능합니다!

**교실에서 바로 사용 가능합니다!** 🎮📊✨

---

**Made with ❤️ for Education**

**v3.13 - 30개 확장 완료!** 🎯
